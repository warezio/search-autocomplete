<!--
	Search Autocomplete

	Implement an efficient Search Autocomplete input to search for movie titles, loading its data from a remote service endpoint.

	Note: For simplicity, use the provided searchData method to simulate a remote call.

	When you feel ready, you can validate your solution using any collaborative HTML/CSS renderer, such as this one.
-->
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>Search Autocomplete</title>
		<!-- Included some basic styling, change at will -->
		<link
			rel="stylesheet"
			type="text/css"
			href="https://cdn.rawgit.com/prampcontent/3ea04cbd0f61a798e96afbe5d31ec2f9/raw/e879e32222b543b29a168daa089e2f9f28cf9eb2/autocomplete.css"
		/>
	</head>

	<body>
		<form class="search-form">
			<input
				type="text"
				class="search-input"
				placeholder="Start typing a movie title..."
			/>
			<ul class="results"></ul>
		</form>
		<!-- Helper code to provide a search API for mock data -->
		<script src="https://cdn.rawgit.com/prampcontent/180077452f9279073cab1035f60d30cf/raw/9cbf891a80bad9ad09c6261ef9578a65502922cc/search_helper.js"></script>
		<script>
			/*-------------------------------
			 *
			 * Write your JavaScript code here.
			 *
			 * The mocked search data is available using the searchData async method, e.g:
			 *   searchData("QUERY").then(results => ...)
			 * ------------------------------*/
			window.addEventListener("load", function() {
				this.addEventListener("keyup", function() {
					let sQuery = document.querySelector(
						".search-form .search-input"
					).value;
					let sResultsUl = document.querySelector(
						".search-form .results"
					);
					searchData(sQuery).then(results => {
						let sResults = results;
						sResultsUl.innerHTML = "";
						sResults.forEach(function(sResult, index) {
							let sResultsLi = document.createElement("li");
							sResultsUl.appendChild(sResultsLi);
							sResultsLi.innerHTML += sResult.title;
							sResultsLi.innerHTML += " â˜… ";
							sResultsLi.innerHTML += sResult.rating;
						});
					});
				});
			});
		</script>
	</body>
</html>
